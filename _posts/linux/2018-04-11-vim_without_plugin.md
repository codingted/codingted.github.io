---
title: 无插件的vim操作
category: linux
tags: vim
---

## 浏览代码

```shell
:E
```
这个界面中，你可以用 j, k 键上下移动，然后回车，进入一个目录，或是找开一个文件。你可以看到上面有一堆命令：

* 【 – 】 到上级目录
* 【D】删除文件（大写）
* 【R】改文件名（大写）
* 【s】对文件排序（小写）
* 【x】执行文件
当然，打开的文件会把现有已打开的文件给冲掉——也就是说你只看到了一个文件。

如果你要改变当前浏览的目录，或是查看当前浏览的目录，你可以使用和shell一样的命令：

```shell
:cd <dir> -改变当前的目录
:pwd - 查看当前的目录
```

## 缓冲区

```shell
:ls 
```

<!-- more -->

你可以看到Vim打开了几个文件,并且每个文件都有编号，如果你要切换打开的文件，这个时候，你不要按回车（按了也没事，只不过按了就看不到:ls输出的buffer列表了），你可以使用下面的命令切换文件（buffer后面的4表示切到4号文件）：

```shell
:buffer 4
# 或者
:buffer <dir>
```
上图中，我们还可以看到编号后边有一个%a，这表示当前文件，相关的标记如下：

– （非活动的缓冲区）
a （当前被激活缓冲区）
h （隐藏的缓冲区）
% （当前的缓冲区）
\# （交换缓冲区）
= （只读缓冲区）
\+ （已经更改的缓冲区）

## 快速切换打开的文件

```shell
:bnext      缩写 :bn
:bprevious   缩写 :bp
:blast  缩写 :bl
:bfirst 缩写 :bf
```

## 窗口分屏浏览

```shell
:splite     缩写:sp (水平分割)
:vsplite    缩写:vsp (垂直分割)
```

用浏览文件的命令来分隔窗口

```shell
:He   全称为 :Hexplore  （在下边分屏浏览目录）
:He!  （在上分屏浏览目录）
:Ve 全称为 :Vexplore （在左边分屏间浏览目录，要在右边则是 :Ve!）
```
在分屏间移动:**先按Ctrl + W，然后按方向键：h j k l**

## 分屏同步

两个分屏中的文件同步移动

```shell
:set scb    设置分屏同步
:set scb!   解除分屏同步
```
注：set scb 是 set scrollbind 的简写。

## Tab页浏览目录

```shell
:Te  全称是 :Texplorer
gt   – 到下一个页
gT  – 到前一个页
{i} gt   – i是数字，到指定页，比如：5 gt 就是到第5页
```
也以使用 【:tabm {n}】来切换Tab页

```shell
:tabs  查看打开tab页的情况
:tabclose [i] – 如果后面指定了数字，那就关闭指定页，如果没有就关闭当前页
```

可以使用 vim 的 -p 参数来用Tab页的方式打开多个文件

```shell
vim -p cool.cpp shell.cpp haoel.cpp
vim -p *.cpp
```

## 保存会话

如果你在当前的会话中设置了各种的配置(打开了多个窗口,行号,同步...),可以使用下
```shell
:mksession ~/.mysession.vim
# 如果文件重复，vim默认会报错，如果你想强行写入的话，你可以在mksession后加! ：
:mksession! ~/.mysession.vim
# 恢复会话
vim -S ~/.mysession.vim
```
现在就可以全部保存并退出了, 下次只需要恢复会话就可以了

```shell
:qa   – 退出全部 
:wqa  -保存全部并退出全部
```

## 其它

```shell
【guu 】 – 把一行的文字变成全小写。或是【Vu】
【gUU】 – 把一行的文件变成全大写。或是【VU】
【v】键进入选择模式，然后移动光标选择你要的文本，按【u】转小写，按【U】转大写
【ga】 –  查看光标处字符的ascii码
【g8】 – 查看光标处字符的utf-8编码
```

### 缩进相关

```shell
【>>】向右给它进当前行 【<<】向左缩进当前行
【=】  – 缩进当前行 （和上面不一样的是，它会对齐缩进）
【=%】 – 把光标位置移到语句块的括号上，然后按=%，缩进整个语句块（%是括号匹配）
【G=gg】 或是 【gg=G】  – 缩进整个文件（G是到文件结尾，gg是到文件开头）
```

### 光标移动

```shell
【Ctrl + O】向后回退你的光标移动
【Ctrl + I 】向前追赶你的光标移动
这两个快捷键很有用，可以在Tab页和Windows中向前和向后trace你的光标键，这也方便你跳转光标。
```
### 读取shell相关命令

```shell
【:r!date】 插入日期
上面这个命令，:r 是:read的缩写，!是表明要运行一个shell命令，意思是我要把shell命令的输出读到vim里来。
```
# 转自
[酷壳-无插件VIM编程技巧](https://coolshell.cn/articles/11312.html)
